<div class="modal-backdrop" (click)="close()"></div>
<div class="user-modal">
  <form [formGroup]="form" (ngSubmit)="submit()" (click)="$event.stopPropagation()">
    <h2>{{ isEdit ? 'Edit User' : 'Add User' }}</h2>
    <div class="form-group">
      <label>Full Name *</label>
      <input formControlName="name" placeholder="Enter full name" [class.invalid]="form.get('name')?.invalid && form.get('name')?.touched" />
      <div class="error" *ngIf="form.get('name')?.invalid && form.get('name')?.touched">This field is required</div>
    </div>

    <div class="form-group">
      <label>E-mail Address *</label>
      <div class="multi-input">
        <input
          [(ngModel)]="newEmail"
          name="newEmail"
          placeholder="Enter email address"
          type="email"
        />
        <button type="button" (click)="addToArray('email')">+ Add</button>
      </div>
      <div class="multi-chips">
        <span class="chip" *ngFor="let e of email.controls; let i = index">
          {{ e.value }}
          <button type="button" (click)="removeFromArray('email', i)">×</button>
        </span>
      </div>
    </div>

    <div class="form-group">
      <label>Phone Number*</label>
      <div class="multi-input">
        <input
          [(ngModel)]="newContact"
          name="newContact"
          placeholder="(___) ___-____"
          type="text"
        />
        <button type="button" (click)="addToArray('contact')">+ Add</button>
      </div>
      <div class="multi-chips">
        <span class="chip" *ngFor="let c of contact.controls; let i = index">
          {{ c.value }}
          <button type="button" (click)="removeFromArray('contact', i)">×</button>
        </span>
      </div>
    </div>

    <div class="form-group">
      <label>Address *</label>
      <div class="multi-input">
        <input
          [(ngModel)]="newAddress"
          name="newAddress"
          placeholder="Enter address"
          type="text"
        />
        <button type="button" (click)="addToArray('address')">+ Add</button>
      </div>
      <div class="multi-chips">
        <span class="chip" *ngFor="let a of address.controls; let i = index">
          {{ a.value }}
          <button type="button" (click)="removeFromArray('address', i)">×</button>
        </span>
      </div>
    </div>

    <div class="form-group">
      <label>Gender *</label>
      <select formControlName="gender">
        <option value="">Select</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </div>

    <div class="form-group">
      <label>Password *</label>
      <input formControlName="password" type="password" placeholder="Password" />
    </div>

    <button class="submit-btn" type="submit" [disabled]="loading">{{ isEdit ? 'Update' : 'Submit' }} Form</button>
  </form>
</div>
